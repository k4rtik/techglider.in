<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Configuring Apache for Developing Multiple Websites under Ubuntu Linux &#183; The TechGlider</title><link rel=stylesheet href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600" type=text/css><link rel=stylesheet href=techglider.in/libraries/normalize.3.0.1.css><link rel=stylesheet href=techglider.in/css/liquorice.css><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script></head><body class=li-body><style type=text/css>input.gsc-input,.gsc-input-box,.gsc-input-box-hover,.gsc-input-box-focus,.gsc-search-button{box-sizing:content-box;line-height:normal}.gs-title{line-height:normal}table.gsc-table-result{border-collapse:separate}.gsc-input-box input{color:#000}.gsc-control-cse{padding:.1em 0 .5em 1em!important;width:14em!important;float:right;line-height:normal}input.gsc-search-button-v2{padding:6px 12px!important}.gsc-search-box-tools .gsc-search-box .gsc-input{padding-right:1px!important}</style><header class=li-page-header><div class=container><div class=row><div class="sixteen columns"><div class="li-brand li-left"><a href=techglider.in/>The TechGlider</a></div><div class="li-menu li-right"><span class=li-menu-icon onclick='toggle("menu")'>&#9776;</span><ul id=menu2 class=li-menu-items><li><a href=techglider.in/post>Posts</a></li><li><a href=techglider.in/quote>Quotes</a></li><li><a href=techglider.in/status>Statuses</a></li><li><a href=techglider.in/about>About</a></li><li><script>(function(){var t,n="partner-pub-4463712641758053:o1e85jn1rm4",e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=(document.location.protocol=="https:"?"https:":"http:")+"//www.google.com/cse/cse.js?cx="+n,t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)})()</script><gcse:search></gcse:search></li></ul></div></div></div><div class=row><div class="sixteen columns"><ul id=menu class="li-menu-items li-menu-mobile"><li><a href=techglider.in/post>Posts</a></li><li><a href=techglider.in/quote>Quotes</a></li><li><a href=techglider.in/status>Statuses</a></li><li><a href=techglider.in/about>About</a></li><li><gcse:search></gcse:search></li></ul></div></div></div></header><div class=container><div class=row><div class="sixteen columns"><article class=li-article><header class=li-article-header><h1 class=li-article-title>Configuring Apache for Developing Multiple Websites under Ubuntu Linux</h1><time class=li-article-date>Thursday, August 18, 2011</time></header><section><p>Are you a beginner in web development with <a href=http://en.wikipedia.org/wiki/LAMP_%28software_bundle%29>LAMP</a> environment, or a CS/IT student overwhelmed with setting up LAMP and configuring it for your web-related academic project? If yes, then you are at the right place.</p><p>We have discussed earlier how easy it is to <a href=http://www.muktware.com/articles/08/2011/1348>setup a web development environment on your Ubuntu desktop</a>. In this article we will try to have a more customized setup of this environment for easily working with multiple websites. Also find below introduction to some useful <a href=http://en.wikipedia.org/wiki/Apache>Apache</a> utilities and configuration files on Ubuntu/Debian operating system.</p><p>One of the ways to work on multiple sites is to put different directories under /var/www and access them as http://localhost/site1, http://localhost/site2 etc. but there is another and more elegant way. We can access our sites simply by pointing our browsers to http://site1/ and http://site2 etc. To find out how, follow the tutorial.</p><p>Let&rsquo;s keep all our development websites under the home directory in public_html folder. Apart from being easy to manage your website from inside your home folder, this has the benefit that you no longer need to use sudo to put files in your document root (/var/www earlier).</p><p>Open the Terminal and follow the steps for a test setup, you may customize it your preferences later:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kartik@PlatiniumLight ~ $ mkdir public_html
</span></span><span style=display:flex><span>kartik@PlatiniumLight ~ $ cd public_html/
</span></span><span style=display:flex><span>kartik@PlatiniumLight ~/public_html $ mkdir site1
</span></span><span style=display:flex><span>kartik@PlatiniumLight ~/public_html $ mkdir site2
</span></span><span style=display:flex><span>kartik@PlatiniumLight ~/public_html $ 
</span></span></code></pre></div><p>Create files called index.html with some content inside each of these directories to help you identify them when you walk through this tutorial:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kartik@PlatiniumLight ~/public_html $ cd site1
</span></span><span style=display:flex><span>kartik@PlatiniumLight ~/public_html/site1 $ gedit index.html
</span></span></code></pre></div><p><a href=http://k4rtik.files.wordpress.com/2011/07/1-screenshot-index-html-public_html-site1-gedit.png><img src=http://k4rtik.files.wordpress.com/2011/07/1-screenshot-index-html-public_html-site1-gedit.png alt="Screenshot - index.html (~/public_html/site1) - gedit"></a></p><p>Enter some text such as &ldquo;This is site 1&rdquo; and save the file. Similarly put &ldquo;This is site 2&rdquo; in the index.html of site2 directory.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kartik@PlatiniumLight ~/public_html/site1 $ cd ../site2
</span></span><span style=display:flex><span>kartik@PlatiniumLight ~/public_html/site2 $ gedit index.html
</span></span></code></pre></div><p><a href=http://k4rtik.files.wordpress.com/2011/07/2-screenshot-index-html-public_html-site2-gedit.png><img src=http://k4rtik.files.wordpress.com/2011/07/2-screenshot-index-html-public_html-site2-gedit.png alt="Screenshot - index.html (~/public_html/site2) - gedit"></a></p><p>Now begins the main step of the process. We have to create separate apache configuration file for each of the websites. This is fairly easy to do. We copy the default config file and modify it to our needs:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kartik@PlatiniumLight ~/public_html/site2 $ cd /etc/apache2/sites-available/
</span></span><span style=display:flex><span>kartik@PlatiniumLight /etc/apache2/sites-available $ sudo cp default site1
</span></span><span style=display:flex><span>kartik@PlatiniumLight /etc/apache2/sites-available $ sudo cp default site2
</span></span><span style=display:flex><span>kartik@PlatiniumLight /etc/apache2/sites-available $ sudo vim site1
</span></span></code></pre></div><p>Note that I am using vim editor for making the changes as I prefer it for its amazing syntax highlight support even for various linux configuration files, you may use gedit, or any other editor instead.</p><p>We need to change the path of the <em>DocumentRoot</em> and <em>Directory</em> to the particular website’s directory, and add a <em>ServerName</em> directive:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>
</span></span><span style=display:flex><span>ServerName site1
</span></span><span style=display:flex><span>DocumentRoot /home/kartik/public_html/site1
</span></span><span style=display:flex><span>&lt;Directory /home/kartik/public_html/site1/&gt;
</span></span></code></pre></div><p>Take notice of the &lsquo;/&rsquo; near the end of the second line, it is important. Also don&rsquo;t forget to add the line with <em>ServerName</em> directive just before the <em>DocumentRoot</em> directive. The lines which need to be edited are highlighted with red arrows in the following screenshot:</p><p><a href=http://k4rtik.files.wordpress.com/2011/07/3-screenshot-terminal-arrows.png><img src=http://k4rtik.files.wordpress.com/2011/07/3-screenshot-terminal-arrows.png alt="Screenshot - Terminal - Editing site1 config file"></a></p><p>Save the file, similar changes need to be done for other sites also, site2 in this example.</p><p>Now we need to make entries in the hosts file so that Apache can recognize the new sites.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> kartik@PlatiniumLight ~ $ sudo gedit /etc/hosts
</span></span></code></pre></div><p>Add the names of the new sites after localhost as shown:</p><p><a href=http://k4rtik.files.wordpress.com/2011/07/4-screenshot-hosts-etc-gedit.png><img src=http://k4rtik.files.wordpress.com/2011/07/4-screenshot-hosts-etc-gedit.png alt="Screenshot - hosts (/etc) - gedit"></a></p><p>Now enable the new websites by using <em>a2ensite</em> command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kartik@PlatiniumLight ~ $ sudo a2ensite site1
</span></span><span style=display:flex><span>Enabling site site1.
</span></span><span style=display:flex><span>Run <span style=color:#e6db74>&#39;/etc/init.d/apache2 reload&#39;</span> to activate new configuration!
</span></span><span style=display:flex><span>kartik@PlatiniumLight ~ $ 
</span></span></code></pre></div><p>Do similarly for site2, and then run the following command to activate the new configuration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kartik@PlatiniumLight ~ $ sudo service apache2 reload
</span></span><span style=display:flex><span>* Reloading web server config apache2
</span></span><span style=display:flex><span>apache2: Could not reliably determine the server<span style=color:#960050;background-color:#1e0010>&#39;</span>s fully qualified domain name, using 127.0.1.1 <span style=color:#66d9ef>for</span> ServerName
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> OK <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>kartik@PlatiniumLight ~ $ 
</span></span></code></pre></div><p>You can ignore the warning which is shown in the above output. Now open your favorite browser and open http://site1 and http://site2 in different tabs, you will find the content of their respective index.html files.</p><p><a href=http://k4rtik.files.wordpress.com/2011/07/5-screenshot-chromes.png><img src=http://k4rtik.files.wordpress.com/2011/07/5-screenshot-chromes.png alt="Screenshot - Chromium showing both the sites"></a></p><p>And now you are done with setting up multiple sites in Apache. You can create as many sites as desired by following the same procedure, creating a config file for each website.</p><p>Here follows an introduction to some useful Apache utilities and configuration files which aid you in this kind of a setup:</p><p><strong>a2ensite</strong> - As we used this above, you already know what it does - enable a website among those available under /etc/apache2/sites-available directory.</p><p><strong>a2dissite</strong> - does exactly the opposite - disable a website so that it is no longer accessible from your web server. E.g.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kartik@PlatiniumLight ~ $ sudo a2dissite site2
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>sudo<span style=color:#f92672>]</span> password <span style=color:#66d9ef>for</span> kartik:
</span></span><span style=display:flex><span>Site site2 disabled.
</span></span><span style=display:flex><span>Run <span style=color:#e6db74>&#39;/etc/init.d/apache2 reload&#39;</span> to activate new configuration!
</span></span><span style=display:flex><span>kartik@PlatiniumLight ~ $ sudo service apache2 reload
</span></span><span style=display:flex><span>* Reloading web server config apache2
</span></span><span style=display:flex><span>apache2: Could not reliably determine the server<span style=color:#960050;background-color:#1e0010>&#39;</span>s fully qualified domain name, using 127.0.1.1 <span style=color:#66d9ef>for</span> ServerName
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> OK <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>kartik@PlatiniumLight ~ $ 
</span></span></code></pre></div><p>This will disable site2 from loading any more. You can use a2ensite to enable it again.</p><p>Similar to sites, there are corresponding directories and commands for controlling apache modules also. Available modules are kept under /etc/apache2/mods-available directory and enabled ones are symlinked under mods-enabled directory. The corresponding commands are - <strong>a2enmod</strong> and <strong>a2dismod</strong>. E.g.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kartik@PlatiniumLight /etc/apache2/conf.d $ sudo a2enmod rewrite
</span></span><span style=display:flex><span>Enabling module rewrite.
</span></span><span style=display:flex><span>Run <span style=color:#e6db74>&#39;/etc/init.d/apache2 restart&#39;</span> to activate new configuration!
</span></span><span style=display:flex><span>kartik@PlatiniumLight /etc/apache2/conf.d $ sudo service apache2 reload
</span></span><span style=display:flex><span>* Reloading web server config apache2
</span></span><span style=display:flex><span>apache2: Could not reliably determine the server<span style=color:#960050;background-color:#1e0010>&#39;</span>s fully qualified domain name, using 127.0.1.1 <span style=color:#66d9ef>for</span> ServerName
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> OK <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>kartik@PlatiniumLight /etc/apache2/conf.d $ 
</span></span></code></pre></div><p>This will enable Apache rewrite module which is required my some CMS solutions like Drupal to enable pretty URLs.</p><p>Hope this article was useful to you, feel free to ask your doubts, problems you face, or any similar tips you might have through comments.</p><p><em>An edited version of this article first appeared at <a href=http://www.muktware.com/articles/1876>http://www.muktware.com/articles/1876</a></em></p></section><span class=li-article-taxonomies>Posted
with tags
<a href=techglider.in/tags/apache>Apache</a>
<a href=techglider.in/tags/commands>commands</a>
<a href=techglider.in/tags/gnu/linux>gnu/linux</a>
<a href=techglider.in/tags/hosting>Hosting</a>
<a href=techglider.in/tags/informative>Informative</a>
<a href=techglider.in/tags/lamp>LAMP</a>
<a href=techglider.in/tags/linux>Linux</a>
<a href=techglider.in/tags/terminal>terminal</a>
<a href=techglider.in/tags/ubuntu>ubuntu</a></span></article></div></div><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="techglider",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><div class="row li-pagination"><div class="eight columns"><div class=li-pagination-previous>Later article<br><a href=techglider.in/post/2011/07/15/of-corruption-india-and-my-first-bribe/>Of Corruption, India, and My First Bribe</a></div></div><div class="eight columns"><div class=li-pagination-next>Older article<br><a href=techglider.in/quote/2011/10/04/even-if-you-wrote-100-of-the-code/>even if you wrote 100% of the code...</a></div></div></div></div><footer class=li-page-footer><div class=container><div class=row><div class="sixteen columns"><div class=li-page-footer-legal>Copyright © 2008-2022 Kartik Singhal.</div><div class=li-page-footer-theme><span>Built with <a href=http://gohugo.io>Hugo</a> & <a href=https://github.com/k4rtik/liquorice/>liquorice</a></span></div></div></div></div></footer><script type=text/javascript>function toggle(t){var e=document.getElementById(t);e.style.display=="block"?e.style.display="none":e.style.display="block"}</script><script type=text/javascript>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57213074-1"]),_gaq.push(["_trackPageview"]),function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}()</script></body></html>